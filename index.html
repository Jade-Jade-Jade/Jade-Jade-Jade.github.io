<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="Jade-Jade-Jade">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Jade-Jade-Jade">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jade-Jade-Jade">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Jade-Jade-Jade</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jade-Jade-Jade</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">不忘初心，方得始终</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-start">
          <a href="/categories/开篇" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            开篇
          </a>
        </li>
      
        
        <li class="menu-item menu-item-spider">
          <a href="/categories/爬虫" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            爬虫
          </a>
        </li>
      
        
        <li class="menu-item menu-item-algorithm">
          <a href="/categories/算法" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            算法
          </a>
        </li>
      
        
        <li class="menu-item menu-item-information retrieval and web search engines">
          <a href="/categories/资料检索与搜索引擎" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            资料检索与搜索引擎
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/25/搜索引擎的评估/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jade-Jade-Jade">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jade-Jade-Jade">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/25/搜索引擎的评估/" itemprop="url">搜索引擎的评估 Search Engine Evaluation</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-25T14:46:03-07:00">
                2017-09-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/资料检索与搜索引擎/" itemprop="url" rel="index">
                    <span itemprop="name">资料检索与搜索引擎</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<blockquote>
<h4 id="How-do-we-measure-the-quality-of-search-engines"><a href="#How-do-we-measure-the-quality-of-search-engines" class="headerlink" title="How do we measure the quality of search engines?"></a>How do we measure the quality of search engines?</h4></blockquote>
<p>Recall and Precision（召回率和精确率）</p>
<p>$$Precision = \frac{relevant{\space}items{\space}retrieved}{all{\space}retrieved{\space}items}$$ $$Recall = \frac{relevant{\space}items{\space}retrieved}{all{\space}relevant{\space}items}$$ </p>
<table>
<thead>
<tr>
<th>—</th>
<th>Relevant</th>
<th>Nonrelevant</th>
</tr>
</thead>
<tbody>
<tr>
<td>Retrived</td>
<td>True Positive(tp)</td>
<td>False Positive(fp)</td>
</tr>
<tr>
<td>Not Retrived</td>
<td>False Negative(fn)</td>
<td>True Negative(tn)</td>
</tr>
</tbody>
</table>
<p>$$Precision = \frac{tp}{tp+fp}$$ $$Recall = \frac{tp}{tp+fn}$$ $$Accuracy = \frac{tp+tn}{tp+fp+fn+tn}$$</p>
<p><strong>[解释]</strong>: 这里的positive相当于积极的评价，也就是retrive；negative表示消极的评价，也就是没有取回。因此true positive表示该判断正确结果确实是相关的，false negative表示该消极的判断错误，结果其实是相关的。</p>
<p><strong>[准确率]</strong>: \(Accuracy = \frac{tp+tn}{tp+fp+fn+tn}\) 但是通常我们并不会用准确率来作为评判的标准</p>
<p><strong>[有意思的一段分析]</strong>:<br>The advantage of having the two numbers for precision and recall is that one is more important than the other in many circumstances.<br>Typical web surfers would like every result on the first page to be relevant (high precision) but have not the slightest interest in knowing let alone looking at every document that is relevant.<br><strong>在web applications中, Precision is more important than Recall</strong><br>In contrast, various professional searchers such as paralegals and intelligence analysts are very concerned with trying to get as high recall as possible, and will tolerate fairly low precision results in order to get it.<br><strong>在专业搜索中，我们更关注高的召回率，为了达到这个目的可以忍受相对低的精确度</strong><br>Individuals searching their hard disks are also often interested in high recall searches.<br><strong>硬盘搜索中也期待有高的召回率</strong><br>Nevertheless, the two quantities clearly trade off against one another: you can always get a recall of 1 (but very low precision) by retrieving all documents for all queries! Recall is a non-decreasing function of the number of documents retrieved. On the other hand, in a good system, precision usually decreases as the number of documents retrieved is increased. In general we want to get some amount of recall while tolerating only a certain percentage of false positives.<br><strong>不管怎么说，Precision和Recall是相互牵制的。你总是可以通过取回尽量多的文件来达到高的召回率，比如说每次都取回所有的文件则召回率总是1。但是这时候精确度就很低了。在一个好的系统中，往往精确度随着召回数的增加而降低，不过通常我们忍受一定程度的fp来达到较好的召回率</strong></p>
<blockquote>
<h4 id="Pythagorean-Mean"><a href="#Pythagorean-Mean" class="headerlink" title="Pythagorean Mean"></a>Pythagorean Mean</h4></blockquote>
<ul>
<li><strong>Arithmetic Mean 算数平均数</strong></li>
</ul>
<p>$$A=\frac{1}{n}\sum_{i=1}^n{x_i}$$</p>
<ul>
<li><strong>Geometric Mean 几何平均数</strong></li>
</ul>
<p>$$G = \sqrt[n] {x_1x_2…x_n}$$</p>
<ul>
<li><strong>Harmonic Mean 调和平均数</strong></li>
</ul>
<p>$$H = {(\frac{\sum_{i=1}^n{x_i^{-1}}}{n})}^{-1}$$</p>
<blockquote>
<h4 id="F-Measure"><a href="#F-Measure" class="headerlink" title="F Measure"></a>F Measure</h4></blockquote>
<p><strong>weighted harmonic mean of precision and recall</strong></p>
<p>$$F = \frac{1}{\alpha\frac{1}{P}+(1-\alpha)\frac{1}{R}}<br>    = \frac{({\beta}^2+1)PR}{\beta^2P+R}, \space\space\space {\beta}^2=\frac{1-\alpha}{\alpha} $$</p>
<ul>
<li><strong>Balanced \(F_1\)measure</strong>: with \(\beta=1\), \(F=\frac{2PR}{P+R}\)</li>
<li><strong>Values of \(\beta&lt;1\) emphasize precision</strong></li>
<li><strong>Values of \(\beta&gt;1\) emphasize recall</strong></li>
</ul>
<blockquote>
<h4 id="Calculating-Recall-Precision-at-Fixed-Positions"><a href="#Calculating-Recall-Precision-at-Fixed-Positions" class="headerlink" title="Calculating Recall/Precision at Fixed Positions"></a>Calculating Recall/Precision at Fixed Positions</h4></blockquote>
<p>上面所介绍的Precision, recall和F measure都是<strong>set-based measure</strong>。也就是说用于计算<strong>unordered set of documents</strong>。<br>而典型的搜索引擎所给出的结果是有一定顺序的。这一小节将介绍如何评估<strong>ranked results</strong>。</p>
<ul>
<li><strong>Average Precision of the Revelant Documents</strong></li>
</ul>
<p>[例子]</p>
<p>Revelant documents = 6</p>
<table>
<thead>
<tr>
<th>RANK</th>
<th>Relevant OR Nonrelevant</th>
<th>Recall</th>
<th>Precision</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>R</td>
<td>0.17</td>
<td>1.0</td>
</tr>
<tr>
<td>2</td>
<td>N</td>
<td>0.17</td>
<td>0.5</td>
</tr>
<tr>
<td>3</td>
<td>R</td>
<td>0.33</td>
<td>0.67</td>
</tr>
<tr>
<td>4</td>
<td>R</td>
<td>0.5</td>
<td>0.75</td>
</tr>
<tr>
<td>5</td>
<td>R</td>
<td>0.67</td>
<td>0.8</td>
</tr>
<tr>
<td>6</td>
<td>R</td>
<td>0.83</td>
<td>0.83</td>
</tr>
<tr>
<td>7</td>
<td>N</td>
<td>0.83</td>
<td>0.71</td>
</tr>
<tr>
<td>8</td>
<td>N</td>
<td>0.83</td>
<td>0.63</td>
</tr>
<tr>
<td>9</td>
<td>N</td>
<td>0.83</td>
<td>0.56</td>
</tr>
<tr>
<td>10</td>
<td>R</td>
<td>1.0</td>
<td>0.6</td>
</tr>
</tbody>
</table>
<p>Average Precision of the Revelant Documents = (1.0+0.67+0.75+0.8+0.83+0.6)/5 = 0.78</p>
<ul>
<li><strong>Averaging Across Queries</strong></li>
</ul>
<p>上面那个例子是一个query，如何评估多个query呢？</p>
<p>[方法一]<br>仿照上面的方法 (所有Revelant Documents的Precision求和)/(Relevant documents的总数目)<br><img src="https://Jade-Jade-Jade.github.io/image/SearchEngineEvaluation001.png" alt="image"></p>
<p>$$(1 + .67 + .5 + .44 + .5 + .5 + .4 + .43)/8 = 0.55$$</p>
<p>[方法二]<br><strong>Mean Average Precision (MAP)</strong><br>这个方法是research papers中最常用的方法<br>$$MAP=\frac{\sum_{q=1}^Q{Avg{P(q)}}}{Q}, \space\space Q=number\space of\space queries$$<br><img src="https://Jade-Jade-Jade.github.io/image/SearchEngineEvaluation002.png" alt="image"><br>$$AvgP(1)=(1.0+0.67+0.5+0.44+0.5)/5=0.62$$ $$AvgP(2)=(0.5+0.4+0.43)/3=0.44$$ $$MAP=(0.62+0.44)/2=0.53$$</p>
<p>利用MAP评估搜索引擎的缺点：</p>
<ol>
<li>Marco-averaging: Each query counts equally 也就是说每个query的重要度都是一样的</li>
<li>MAP assumes user is interested in finding many revelant documents for each query [不是很懂]</li>
<li>MAP requires many relevance judgments in documents collection</li>
</ol>
<blockquote>
<p> Discounted Cumulative Gain</p>
</blockquote>
<p>The premise of DCG is that highly relevant documents appearing lower in a seach result list should be penalized as the graded relevance value is reduced logarithmically proportional to the position of the result.<br>这个方法的基本思想是:<br>如果一个相关文档出现在结果列表中靠后的位置，那么应该给予相应的惩罚。越靠后惩罚越大。</p>
<p><img src="https://Jade-Jade-Jade.github.io/image/SearchEngineEvaluation003.png" alt="image"><br>[例子]<br><img src="https://Jade-Jade-Jade.github.io/image/SearchEngineEvaluation004.png" alt="image"></p>
<blockquote>
<h4 id="基于Precision和Recall方法的局限性。"><a href="#基于Precision和Recall方法的局限性。" class="headerlink" title="基于Precision和Recall方法的局限性。"></a>基于Precision和Recall方法的局限性。</h4></blockquote>
<ul>
<li>Should average over large document collection and query ensembles</li>
<li>Need human relevance assessments<br>  需要人来判断是否相关，这并不是很可靠的</li>
<li>Assessments have to be binary<br>  对相关性的评价是非黑即白</li>
<li>Heavily skewed by collection/authorship<br>  不同的领域有可能会有不同的结果，不具有普遍性</li>
</ul>
<blockquote>
<h4 id="Non-­relevance-­based-measures"><a href="#Non-­relevance-­based-measures" class="headerlink" title="Non-­relevance-­based measures"></a>Non-­relevance-­based measures</h4></blockquote>
<p>搜索引擎也会使用不基于相关性的方法</p>
<ul>
<li>Click-through on ﬁrst result: Not very reliable if you look at a single click-through … but pretty reliable in the aggregate.</li>
<li>Studies of user behavior in the lab</li>
<li>A/B testing</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/20/倒排索引-Inverted-Indexing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jade-Jade-Jade">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jade-Jade-Jade">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/20/倒排索引-Inverted-Indexing/" itemprop="url">倒排索引_Inverted_Indexing</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-20T14:24:56-07:00">
                2017-09-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/资料检索与搜索引擎/" itemprop="url" rel="index">
                    <span itemprop="name">资料检索与搜索引擎</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<h4 id="Definition-of-an-Inverted-index"><a href="#Definition-of-an-Inverted-index" class="headerlink" title="Definition of an Inverted index"></a>Definition of an Inverted index</h4><p>An inverted index is typically composed of a vector containing all distinct words of the text collection in lexicographical order (which is called the vocabulary) and <strong>for each word in the vocabulary, a list of all documents (and text positions) in which that word occurs</strong></p>
</blockquote>
<p><strong>通俗的说: 单词到包括该单词的文档的集合的映射。</strong></p>
<p>注释: 这里的单词可能是被处理过的，一些常用的处理方法有</p>
<ul>
<li><strong>Case folding</strong>: converting all uppercase letters to lower case</li>
<li><strong>Stemming</strong>: reducing words to their morphological root</li>
<li><strong>Stop words</strong>: removing words that are so common they provide no information</li>
</ul>
<blockquote>
<h4 id="Inverted-index-的应用情景"><a href="#Inverted-index-的应用情景" class="headerlink" title="Inverted index 的应用情景"></a>Inverted index 的应用情景</h4></blockquote>
<p>假设有这样一个Query:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Which plays of Shakespeare contain the words Brutus AND Caesar but NOT Calpurnia?</div></pre></td></tr></table></figure>
<h5 id="方法一-暴力搜索"><a href="#方法一-暴力搜索" class="headerlink" title="方法一 暴力搜索"></a>方法一 暴力搜索</h5><p>先找到所有包含Brutus和Caesar的话剧，再逐字排查，如果含有Caplurnia就删除掉该话剧。</p>
<p><strong>缺点：</strong> </p>
<ul>
<li>Too slow</li>
<li>需要很大的空间</li>
<li>不够灵活，不支持其他的操作，比如”Find the word Romans near countrymen”</li>
</ul>
<h5 id="方法二：-Term-Document-Incidence-Matrix"><a href="#方法二：-Term-Document-Incidence-Matrix" class="headerlink" title="方法二： Term-Document Incidence Matrix"></a>方法二： Term-Document Incidence Matrix</h5><p>用了  Bit Map 位运算的思想。构建如下矩阵，(t,d)=1代表term t在document d中出现，0代表没有出现。例如：</p>
<p><img src="https://jade-jade-jade.github.io/image/InvertedIndex001.jpg" alt="image"></p>
<p>这样对于上一个查询，只需要</p>
<p>110100 AND 110111 AND 10111 = 100100</p>
<p>所以the two plays matching the query are:</p>
<p>“Anthony and Cleopatra”, “Hamlet”</p>
<p><strong>缺点：</strong> </p>
<ul>
<li>需要很大的空间,并且矩阵通常十分稀疏:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Given 1 million documents and 500,000 terms.</div><div class="line">The (term x Document) matrix in this case will have size 500K x 1M or</div><div class="line">half-a-trillion 0’s and 1’s.</div></pre></td></tr></table></figure>
<h5 id="方法三：-Inverted-Index"><a href="#方法三：-Inverted-Index" class="headerlink" title="方法三： Inverted Index"></a>方法三： Inverted Index</h5><p>在数据结构上我们选择了链表而不是数组，链表的优势在于：</p>
<ul>
<li>Dynamic space allocation</li>
<li>Insertion of terms into documents easy</li>
<li>There is space overhead of pointers, though this is not too serious</li>
</ul>
<p><strong>Inverted Index的构建如下图所示</strong><br><img src="https://Jade-Jade-Jade.github.io/image/InvertedIndex002.jpeg" alt="image"><br><img src="https://Jade-Jade-Jade.github.io/image/InvertedIndex003.jpeg" alt="image"></p>
<p><strong>应用举例：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">1）Brutus AND Caesar</div><div class="line">- Locate Brutus in the Dictionary and Retrieve its postings.</div><div class="line">Brutus: 2-&gt;4-&gt;8-&gt;16-&gt;32-&gt;64-&gt;128</div><div class="line">- Locate Caesar in the Dictionary and Retrieve its postings.</div><div class="line">Caesar: 1-&gt;2-&gt;3-&gt;5-&gt;8-&gt;13-&gt;21-&gt;34</div><div class="line">- “Merge” the two postings and select the ones in common (postings are document ids):</div><div class="line">Brutus: 2-&gt;4-&gt;8-&gt;16-&gt;32-&gt;64-&gt;128</div><div class="line">Caesar: 1-&gt;2-&gt;3-&gt;5-&gt;8-&gt;13-&gt;21-&gt;34</div><div class="line">2-&gt;8</div><div class="line">O(m + n) 复杂度</div><div class="line"></div><div class="line">2）Brutus AND Calpurnia AND Caesar</div><div class="line">Brutus: 2-&gt;4-&gt;8-&gt;16</div><div class="line">Caesar: 1-&gt;2-&gt;3-&gt;5-&gt;8-&gt;13-&gt;21-&gt;34</div><div class="line">Calpurnia: 2-&gt;16</div><div class="line">Merge的顺序要从短到长依次进行</div><div class="line">Execute the query as (Calpurnia AND Brutus) AND Caesar.</div><div class="line"></div><div class="line">INTERSECT(&lt;t1, . . . , tn&gt;)</div><div class="line">   terms ← SORTBYINCREASINGFREQUENCY(&lt;t1, . . . , tn&gt;)</div><div class="line">   result ← postings( first(terms))</div><div class="line">   terms ← rest(terms)</div><div class="line">   while terms /= NIL and result /= NIL</div><div class="line">   do</div><div class="line">       result ← INTERSECT(result, postings(first(terms)))</div><div class="line">       terms ← rest(terms)</div><div class="line">   return result</div><div class="line"></div><div class="line">印象中有算法解决Merge K sorted list复杂度可以到nklogk(n为链表的平均长度）</div><div class="line">[LeetCode参考: https://leetcode.com/problems/merge-k-sorted-lists/description/]</div><div class="line">书本并没有采取这种算法可能有原因的：</div><div class="line">- 在实际情况中这些个链表的长度一点也不平均</div><div class="line">- 只需要最短的那个链表给merge结束就完事了我们并不需要完完整整的merge。</div></pre></td></tr></table></figure>
<blockquote>
<h4 id="Skip-Pointers"><a href="#Skip-Pointers" class="headerlink" title="Skip Pointers"></a>Skip Pointers</h4></blockquote>
<p><a href="https://www.youtube.com/watch?v=tPsCQOsa7j0" target="_blank" rel="external">相关视频讲解</a></p>
<p><strong>目的： speed up the merging of postings</strong></p>
<p><strong>方法解释</strong>：如图所示<br><img src="https://Jade-Jade-Jade.github.io/image/InvertedIndex004.jpeg" alt="image"></p>
<p><strong>算法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">INTERSECTWITHSKIPS (p1, p2)</div><div class="line">	answer ← &lt; &gt;</div><div class="line">	while p1 /= NIL and p2 /= NIL</div><div class="line">	do if docID(p1) == docID(p2)</div><div class="line">        then ADD(answer, docID(p1))</div><div class="line">            p1 &lt;- next(p1)</div><div class="line">            p2 &lt;- next(p2)</div><div class="line">        else if docID(p1) &lt; docID(p2)</div><div class="line">                then if hasSkip(p1) and (docID(skip(p1)) &lt;= docID(p2))</div><div class="line">                     then while hasSkip(p1) and (docID(skip(p1) &lt;= docID(p2))</div><div class="line">                       do p1 &lt;- skip(p1)</div><div class="line">                    else p1 &lt;- next(p1)</div><div class="line">				else if hasSkip(p2) and (docID(skip(p2)) &lt;= docID(p1))</div><div class="line">                    then while hasSkip(p2) and (docID(skip(p2) &lt;= docID(p1))</div><div class="line">                       do p2 &lt;- skip(p2)</div><div class="line">                    else p2 &lt;- next(p2)</div><div class="line">	return answer</div></pre></td></tr></table></figure>
<p><strong>适用范围：</strong> </p>
<ol>
<li>Index 相对固定 update的次数比较少: Building effective skip pointers is easy if an index is relatively static; it is harder if a postings list keeps changing because of updates. A malicious deletion strategy can render skip lists ineffective.</li>
<li>the presence of skip pointers only helps for AND queries, not for OR queries.</li>
</ol>
<p><strong>问题： How many skip pointers should we add?</strong></p>
<ol>
<li>TradeOff Problem:</li>
</ol>
<ul>
<li>More skips -&gt; shorter skip span =&gt; more likely to skip. But lots of comparision to skip pointers</li>
<li>Fewer skips -&gt; few pointer comparision, but then long skip spans =&gt; few successful skips</li>
</ul>
<ol>
<li>Simple Heuristic</li>
</ol>
<ul>
<li>用Length的平方根: for a postings list of length P, use sqrt{P} evenly-spaced skip pointers.</li>
</ul>
<blockquote>
<h4 id="硬件对速度的影响"><a href="#硬件对速度的影响" class="headerlink" title="硬件对速度的影响"></a>硬件对速度的影响</h4></blockquote>
<p>Choosing the optimal encoding for an inverted index is an ever-changing game for the system builder, because it is strongly dependent on underlying computer technologies and their relative speeds and sizes. Traditionally, CPUs were slow, and so highly compressed techniques were not optimal. Now CPUs are fast and disk is slow, so reducing disk postings list size dominates. However, if you’re running a search engine with everything in memory then the equation changes again.</p>
<blockquote>
<h4 id="Phrase-Queries"><a href="#Phrase-Queries" class="headerlink" title="Phrase Queries"></a>Phrase Queries</h4></blockquote>
<p>之前所说的inverted index技术是基于Term的，但是在实际运用中我们经常会查询一个短语，而不是单词，比如：stanford university</p>
<p>这里阐述两个方法</p>
<h5 id="方法一：-Bi-word-indexes-2-grams-2-shingles"><a href="#方法一：-Bi-word-indexes-2-grams-2-shingles" class="headerlink" title="方法一： Bi-word indexes (2-grams, 2 shingles)"></a>方法一： Bi-word indexes (2-grams, 2 shingles)</h5><p><strong>方法介绍</strong></p>
<ul>
<li>A bi-word (or a 2-gram) is a consecutive pair of terms in some text。比如 “Friends, Romans, Countrymen” 会生成 “friends romans” 和 “romans countrymen”</li>
<li>Each of these bi-words is now added to the dictionary as a term。也就是说之前的Term变成了现在的bi-words。</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>数量爆炸！Bi-words will cause an explosion in the vocabulary database</li>
<li>短语长度也许大于2。Queries longer than 2 words will have to be broken into bi-word segments</li>
</ul>
<h5 id="方法二：-Positional-indexes"><a href="#方法二：-Positional-indexes" class="headerlink" title="方法二： Positional indexes"></a>方法二： Positional indexes</h5><p><strong>方法介绍</strong></p>
<p>相比于之前的inverted index, 这里其实就是多记录了一个Term出现的位置位置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;Term, TotalFrequency&gt; -&gt; &lt;docID, Frequency&gt; </div><div class="line">变成</div><div class="line">&lt;Term, TotalFrequency&gt; -&gt; &lt;docID, Frequency, Positions&gt;</div></pre></td></tr></table></figure></p>
<p><img src="https://Jade-Jade-Jade.github.io/image/InvertedIndex005.jpeg" alt="image"></p>
<p>比方说我们要查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">to be or not to be</div></pre></td></tr></table></figure>
<p>现在我们首先找to be, 步骤如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1. 找到同时含有to和be两个term的文档。</div><div class="line">2. 查找两个term在文档中的位置，如果be的位置在to后面一个，那就找到了一个结果</div><div class="line">比如上面那个图，我们就能找到一个possible match是</div><div class="line">to: &lt;...;4:&lt;...,429,433&gt;;...&gt;</div><div class="line">be: &lt;...;4:&lt;...,430,434&gt;;...&gt;</div></pre></td></tr></table></figure>
<p><strong>算法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">POSITIONALINTERSECT(p1, p2, k)</div><div class="line">    answer &lt;- &lt;&gt;</div><div class="line">    while p1 /= NIL and p2 /= NIL</div><div class="line">    do if docID(p1) == docID(p2)</div><div class="line">        then l &lt;- &lt;&gt;</div><div class="line">            pp1 &lt;- positions(p1)</div><div class="line">            pp2 &lt;- positions(p2)</div><div class="line">            while pp1 /= NIL</div><div class="line">            do while pp2 /= NIL</div><div class="line">                do if |pos(pp1) - pos(pp2)| &lt;= k</div><div class="line">                    then ADD(l, pos(pp2))</div><div class="line">                    else if pos(pp2) &gt; pos(pp1)</div><div class="line">                        the break</div><div class="line">                    pp2 &lt;- next(pp2)</div><div class="line">                while l /= &lt;&gt; and |l[0] - pos(pp1)| &gt; k</div><div class="line">                do DELETE(l[0])</div><div class="line">                for each ps in l</div><div class="line">                do ADD(answer, &lt;docID(p1), pos(pp1), ps&gt;)</div><div class="line">                pp1 &lt;- next(pp1)</div><div class="line">            p1 &lt;- next(p1)</div><div class="line">            p2 &lt;- next(p2)</div><div class="line">        else if docID(p1) &lt; docID(p2)</div><div class="line">            then p1 &lt;- next(p1)</div><div class="line">            else p2 &lt;- next(p2)</div><div class="line">    return answer</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/17/【算法导论32】字符串匹配/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jade-Jade-Jade">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jade-Jade-Jade">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/17/【算法导论32】字符串匹配/" itemprop="url">【算法导论32】字符串匹配</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-17T21:06:34-07:00">
                2017-09-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<h4 id="算法导论-32-String-Matching"><a href="#算法导论-32-String-Matching" class="headerlink" title="算法导论 32. String Matching"></a>算法导论 32. String Matching</h4><p>恰逢最近在学习搜索引擎，又提及了字符串处理的只是，便想起来读一次算法导论的32章并且留下笔记。日后再总结其他。</p>
<p>书本中介绍了四个方法。分别为：</p>
<p>Naive string-matching algorithm (暴力)</p>
<p>The Rabin-Karp algorithm</p>
<p>Finite automata</p>
<p>KMP</p>
<p>笔记如下:</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/Jade-Jade-Jade/Jade-Jade-Jade.github.io/master/image/%5B算法导论32%5D001.jpeg" alt="image"><br><img src="https://raw.githubusercontent.com/Jade-Jade-Jade/Jade-Jade-Jade.github.io/master/image/%5B算法导论32%5D002.jpeg" alt="image"><br><img src="https://raw.githubusercontent.com/Jade-Jade-Jade/Jade-Jade-Jade.github.io/master/image/%5B算法导论32%5D003.jpeg" alt="image"><br><img src="https://raw.githubusercontent.com/Jade-Jade-Jade/Jade-Jade-Jade.github.io/master/image/%5B算法导论32%5D004.jpeg" alt="image"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/11/不忘初心/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jade-Jade-Jade">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jade-Jade-Jade">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/11/不忘初心/" itemprop="url">不忘初心</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-11T12:01:47-07:00">
                2017-08-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开篇/" itemprop="url" rel="index">
                    <span itemprop="name">开篇</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>一个一直在琢磨着如何转行却在码农圈越陷越深的伪程序员为自己博客写的一篇前言。</p>
<p>27岁之前专注玩码</p>
<p>偶尔想想诗和远方</p>
<p>给自己的生活种种草，记得按时拔。</p>
</blockquote>
<hr>
<blockquote>
<p>关于专业 </p>
</blockquote>
<ul>
<li style="list-style: none"><input type="checkbox"> <a href="http://www.bilibili.com/video/av9846610/" target="_blank" rel="external">Yaser Abu-Mostafa</a></li>
<li style="list-style: none"><input type="checkbox"> <a href="https://cn.udacity.com/course/deep-learning--ud730" target="_blank" rel="external">深度学习（中/英） | Udacity</a></li>
<li style="list-style: none"><input type="checkbox"> <a href="http://www.deeplearningbook.org" target="_blank" rel="external">GoodFellow</a></li>
<li style="list-style: none"><input type="checkbox"> Clean Code</li>
<li style="list-style: none"><input type="checkbox"> Thinking in Java</li>
<li style="list-style: none"><input type="checkbox"> <a href="http://elm-lang.org/" target="_blank" rel="external">Elm</a></li>
<li style="list-style: none"><input type="checkbox"> 算法</li>
<li style="list-style: none"><input type="checkbox"> Spider</li>
</ul>
<blockquote>
<p>关于兴趣</p>
</blockquote>
<ul>
<li style="list-style: none"><input type="checkbox"> 英文语法书</li>
<li style="list-style: none"><input type="checkbox"> 朗读者</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpeg"
               alt="Jade-Jade-Jade" />
          <p class="site-author-name" itemprop="name">Jade-Jade-Jade</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jade-Jade-Jade</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Gemini
  </a>
</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
